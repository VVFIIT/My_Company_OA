<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.jeesite.modules.finance.dao.ReimburseDao">

    <sql id="reimburseColumns">
        f.id,
        f.PROCINSTID AS "procInstId",
        f.OFFICEID AS "officeId",
        f.APPLICANTID AS "applicantId",
        f.status,
        f.APPLYDATE AS "applyDate",
        f.BEGINDATE AS "beginDate",
        f.ENDDATE AS "endDate",
        f.remark,
        f.TOTALAMOUNT AS "totalAmount",
        f.UPDATEDATE AS "updateDate",
        f.MANAGERFLAG AS "managerFlag",
        f.FAFlag AS "fa_flag",
        f.MANAGERCOMMENT AS "managerComment",
        f.FAComment AS "fa_comment",
        u.name AS "user.name",
        o.name AS "user.office.name"
    </sql>

    <sql id="reimburseJoins">
        JOIN sys_user u ON u.id = f.applicantId
        JOIN sys_office o ON o.id = f.officeId
    </sql>

    <select id="findOnlyNameList" resultType="ReimburseMain">
        SELECT
        <include refid="reimburseColumns"/>
        FROM fa_reimburse_main f
        <include refid="reimburseJoins"/>
        WHERE f.applicantId = #{applicantId}
    </select>

    <select id="findAllNameList" resultType="ReimburseMain">
        SELECT
        <include refid="reimburseColumns"/>
        FROM fa_reimburse_main f
        <include refid="reimburseJoins"/>
    </select>

</mapper>